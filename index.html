<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">

<head>
	<title>HostedPayment Test Page</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script type="text/javascript">

		$(function () {

			$("#btnOpenAuthorizeNetIFrame").click(function () {
				$("#add_payment").show();
				$("#send_token").attr({ "action": "https://test.authorize.net/payment/payment", "target": "add_payment" }).submit();
				$(window).scrollTop($('#add_payment').offset().top - 50);
			});

		});


	</script>
</head>

<body>

	<div>
		Open Authorize.Net in an iframe to complete transaction
		<button id="btnOpenAuthorizeNetIFrame" onclick='$.post("https://apitest.authorize.net/xml/v1/request.api",
		{  
			"getHostedPaymentPageRequest":{  
			   "merchantAuthentication":{  
				  "name":"5KP3u95bQpv",
				  "transactionKey":"346HZ32z3fP4hTG2"
			   },
			   "transactionRequest":{  
				  "transactionType":"authCaptureTransaction",
				  "amount":"20.00",
				  "customer":{  
					 "email":"bmcmanus@mail.com"
				  },
				  "billTo":{  
					 "firstName":"Ellen",
					 "lastName":"Johnson",
					 "company":"Souveniropolis",
					 "address":"14 Main Street",
					 "city":"Pecan Springs",
					 "state":"TX",
					 "zip":"44628",
					 "country":"USA"
				  }
			   },
			   "hostedPaymentSettings":{  
				  "setting":[  
					 {  
						"settingName":"hostedPaymentBillingAddressOptions",
						"settingValue":"{\"show\": true, \"required\":true}"
					 },
					 {  
						"settingName":"hostedPaymentButtonOptions",
						"settingValue":"{\"text\": \"Pay\"}"
					 },
					 {  
						"settingName":"hostedPaymentCustomerOptions",
						"settingValue":"{\"showEmail\":true,\"requiredEmail\":true}"
					 },
					 {  
						"settingName":"hostedPaymentPaymentOptions",
						"settingValue":"{\"cardCodeRequired\":true}"
					 },
					 {  
						"settingName":"hostedPaymentReturnOptions",
						"settingValue":"{\"url\":\"https://jopatwa.github.io/testpage\",\"urlText\":\"Continue\",\"cancelUrl\":\"https://jopatwa.github.io/testpage\",\"cancelUrlText\":\"Cancel\"}"
					 },
					 {  
						"settingName":"hostedPaymentSecurityOptions",
						"settingValue":"{\"captcha\": false}"
					 },
					 {  
						"settingName":"hostedPaymentShippingAddressOptions",
						"settingValue":"{\"show\":false,\"required\":true}"
					 },
					 {  
						"settingName":"hostedPaymentStyleOptions",
						"settingValue":"{\"bgColor\": \"EE00EE\"}"
					 },
					 {  
						"settingName":"hostedPaymentIFrameCommunicatorUrl",
						"settingValue":"{\"url\": \"https://jopatwa.github.io/testpage\"}"
					 }
				  ]
			   }
			}
		 },
		function(data,status){
		alert("Data: " + JSON.stringify(data) + "\nStatus: " + status);
		}
		);'>Show Payment Form</button>
	</div>
	<div id="iframe_holder" class="center-block" style="width:90%;max-width: 1000px">
		<iframe id="add_payment" class="embed-responsive-item panel" name="add_payment" width="100%" frameborder="0" scrolling="no"
		 hidden="true">
		</iframe>
	</div>
	<form id="send_token" action="" method="post" target="add_payment">
		<input type="hidden" name="token" value="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.5KP3u95bQpv"/>
	</form>
<!--
	<script type="text/javascript">
		requestBody = {
			"getHostedPaymentPageRequest": {
				"merchantAuthentication": {
					"name": "5KP3u95bQpv",
					"transactionKey": "346HZ32z3fP4hTG2"
				},
				"transactionRequest": {
					"transactionType": "authCaptureTransaction",
					"amount": "250.00",
					"profile": {
						"customerProfileId": "123456789"
					},
					"customer": {
						"email": "ellen@mail.com"
					},
					"billTo": {
						"firstName": "Ellen",
						"lastName": "Johnson",
						"company": "Souveniropolis",
						"address": "14 Main Street",
						"city": "Pecan Springs",
						"state": "TX",
						"zip": "44628",
						"country": "USA"
					}
				},
				"hostedPaymentSettings": {
					"setting": [{
						"settingName": "hostedPaymentReturnOptions",
						"settingValue": "{\"showReceipt\": true, \"url\": \"https://jopatwa.github.io/testpage\", \"urlText\": \"Continue\", \"cancelUrl\": \"https://jopatwa.github.io/testpage\", \"cancelUrlText\": \"Cancel\"}"
					}, {
						"settingName": "hostedPaymentButtonOptions",
						"settingValue": "{\"text\": \"Pay\"}"
					}, {
						"settingName": "hostedPaymentStyleOptions",
						"settingValue": "{\"bgColor\": \"blue\"}"
					}, {
						"settingName": "hostedPaymentPaymentOptions",
						"settingValue": "{\"cardCodeRequired\": false, \"showCreditCard\": true, \"showBankAccount\": true}"
					}, {
						"settingName": "hostedPaymentSecurityOptions",
						"settingValue": "{\"captcha\": false}"
					}, {
						"settingName": "hostedPaymentShippingAddressOptions",
						"settingValue": "{\"show\": false, \"required\": false}"
					}, {
						"settingName": "hostedPaymentBillingAddressOptions",
						"settingValue": "{\"show\": true, \"required\": false}"
					}, {
						"settingName": "hostedPaymentCustomerOptions",
						"settingValue": "{\"showEmail\": false, \"requiredEmail\": false, \"addPaymentProfile\": true}"
					}, {
						"settingName": "hostedPaymentOrderOptions",
						"settingValue": "{\"show\": true, \"merchantName\": \"G and S Questions Inc.\"}"
					}, {
						"settingName": "hostedPaymentIFrameCommunicatorUrl",
						"settingValue": "{\"url\": \"https://jopatwa.github.io/testpage\"}"
					}]
				}
			}
		}
		$('#btnOpenAuthorizeNetIFrame').click(function () {
			var value = $(this).val();
			$.ajax
				({
					url: 'https://apitest.authorize.net/xml/v1/request.api',
					data: requestBody,
					dataType: 'json',
					contentType: "application/json; charset=utf-8",
					type: 'post',
					success: function (data) {
						console.log('Results' + value + '----' + JSON.stringify(data) + data)
					}
				});
		});
	</script>
-->

	<script type="text/javascript">

		(function () {
			if (!window.AuthorizeNetIFrame) window.AuthorizeNetIFrame = {};
			AuthorizeNetIFrame.onReceiveCommunication = function (querystr) {
				var params = parseQueryString(querystr);
				switch (params["action"]) {
					case "successfulSave":
						break;
					case "cancel":
						break;
					case "resizeWindow":
						var w = parseInt(params["width"]);
						var h = parseInt(params["height"]);
						var ifrm = document.getElementById("add_payment");
						ifrm.style.width = w.toString() + "px";
						ifrm.style.height = h.toString() + "px";
						break;
					case "transactResponse":
						var ifrm = document.getElementById("add_payment");
						ifrm.style.display = 'none';
				}
			};

			function parseQueryString(str) {
				var vars = [];
				var arr = str.split('&');
				var pair;
				for (var i = 0; i < arr.length; i++) {
					pair = arr[i].split('=');
					vars.push(pair[0]);
					vars[pair[0]] = unescape(pair[1]);
				}
				return vars;
			}
		}());
	</script>
</body>

</html>